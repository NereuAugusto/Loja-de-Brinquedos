<div>
	<label for="nome">Nome do produto</label>
	<input type="text" id="nome" name="nome" maxlength="50" />
</div>

<div>
	<label for="descricao">Descrição do produto</label>
	<input type="text" id="descricao" name="descricao" maxlength="100" />
</div>


<div>
	<label for="preco">Preço do produto</label>
	<input type="number" id="preco" name="preco" maxlength="10" />
</div>

<div>
	<button type="button" id="buttonCriar">Criar produto</button>
</div>

<script type="text/javascript">

	let nome = document.getElementById("nome");
	let descricao = document.getElementById("descricao");
    let preco = document.getElementById("preco");
	let buttonCriar = document.getElementById("buttonCriar");

	async function criarProduto() {
		if (!nome.value) {
			alert("O nome é obrigatório");
			return;
		}

        let p = parseFloat(preco.value);
        if (isNaN(p) || p <= 0) {
			alert("O preço é obrigatório");
			return;
		}

		if (!descricao.value) {
			alert("A descricao é obrigatório");
			return;
		}

		// Cria um objeto com os valores que serão enviados para o servidor.
		let dadosParaEnvio = {
			nome: nome.value,
			descricao: descricao.value,
            preco: p
		};

		let opcoes = {
			method: "POST",
			headers: {
				"Content-Type": "application/json"
		    },
		    body: JSON.stringify(dadosParaEnvio)
		};

		try {
			let response = await fetch("/criarProduto", opcoes);

			if (response.ok) {
				nome.value = "";
				descricao.value = "";
                preco.value = "";

				alert("Produto criado com sucesso!");
			} else {
				alert("Erro ao criar o produto!");
			}
		} catch (ex) {
			alert("Erro de rede: " + ex.message);
		}
	}

	buttonCriar.onclick = criarProduto;

</script>